<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transaction</title>
    <!-- Favicon -->
    <link rel="icon" href="{{url_for('static', filename='assets/images/survearnlogo.png')}}" type="image/x-icon">


  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{url_for('static', filename='user/dist/assets/css/transaction.css')}}">
  <style>
    /* Confetti canvas sits above content but doesn't block interactions */
    .confetti-canvas {
      opacity: 0.7;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 1050;
      /* above common UI but below modals if any */
    }
  </style>

</head>

<body style="font-family: 'Nunito', sans-serif;">
  <canvas id="confettiCanvas" class="confetti-canvas" aria-hidden="true"></canvas>
  <div class="container" style="margin-top: 10%;">
    <div class="printer-top"></div>

    <div class="paper-container">
      <div class="printer-bottom"></div>

      <div class="paper">
        <div class="main-contents">
          <div class="success-icon">&#10004;</div>
          <div class="success-title">
            Transaction Requested Successfully
          </div>
          <div class="success-description">
            Your payment for $N in USDT has been recieved and send to SHOPNAME.
          </div>
          <div class="order-details">
            <div class="order-number-label">Payment id</div>
            <div class="order-number">JPZZ1V-WQRR94-78E1VE</div>
          </div>
          <div class="order-footer">You can close this page!</div>
        </div>
        <div class="jagged-edge"></div>
      </div>
    </div>
    <div style="text-align: center; margin-top: 20px;">
      <a href="{{url_for('redeem')}}" role="button" style="
        background-color: #0d6efd;
        color: #fff;
        font-family: inherit;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        text-align: center;
        text-decoration: none;
        vertical-align: middle;
        cursor: pointer;
        user-select: none;
        border: 1px solid #0d6efd;
        padding: 0.375rem 0.75rem;
        border-radius: 0.375rem;
        display: inline-block;
        transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
       " onmouseover="this.style.backgroundColor='#0b5ed7'; this.style.borderColor='#0a58ca';"
        onmouseout="this.style.backgroundColor='#0d6efd'; this.style.borderColor='#0d6efd';"
        onmousedown="this.style.backgroundColor='#0a58ca'; this.style.borderColor='#0a53be'; this.style.boxShadow='0 0 0 0.25rem rgba(49, 132, 253, 0.5)';"
        onmouseup="this.style.backgroundColor='#0b5ed7'; this.style.borderColor='#0a58ca'; this.style.boxShadow='none';">
        Go Back to Redeem
      </a>
    </div>

  </div>
  </div>
  <script>
    (function () {
      const canvas = document.getElementById('confettiCanvas');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      let W = canvas.width = window.innerWidth;
      let H = canvas.height = window.innerHeight;
      const colors = ['#ff4d4f', '#ffcc00', '#52c41a', '#1890ff', '#722ed1'];

      window.addEventListener('resize', () => {
        W = canvas.width = window.innerWidth;
        H = canvas.height = window.innerHeight;
      });

      function rand(min, max) { return Math.random() * (max - min) + min; }

      function Confetto() {
        this.x = rand(0, W);
        this.y = rand(-H, 0);
        this.w = rand(6, 12);
        this.h = this.w * rand(0.6, 1.2);
        this.color = colors[Math.floor(rand(0, colors.length))];
        this.rotation = rand(0, Math.PI * 2);
        this.rotationSpeed = rand(-0.1, 0.1);
        this.vx = rand(-0.5, 0.5);
        this.vy = rand(1, 3);
        this.alpha = 1;
        this.spin = rand(-0.03, 0.03);
        this.tilt = rand(-10, 10);
        this.d = rand(0.5, 1);
      }

      Confetto.prototype.update = function () {
        this.x += this.vx;
        this.y += this.vy * this.d;
        this.rotation += this.rotationSpeed;
        this.tilt += Math.sin(this.rotation) * 0.5;
        this.alpha -= 0.002;
      };

      Confetto.prototype.draw = function (ctx) {
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate(this.rotation);
        ctx.globalAlpha = Math.max(0, this.alpha);
        ctx.fillStyle = this.color;
        ctx.fillRect(-this.w / 2 + this.tilt, -this.h / 2, this.w, this.h);
        ctx.restore();
      };

      let confetti = [];
      const maxCount = 150;

      function spawnBurst(count) {
        for (let i = 0; i < count; i++) {
          if (confetti.length < maxCount) confetti.push(new Confetto());
        }
      }

      // animate for a short celebration and stop
      let running = true;
      let start = performance.now();

      function loop(now) {
        ctx.clearRect(0, 0, W, H);
        for (let i = confetti.length - 1; i >= 0; i--) {
          const c = confetti[i];
          c.update();
          c.draw(ctx);
          if (c.y > H + 20 || c.alpha <= 0) confetti.splice(i, 1);
        }
        if (running) {
          if (Math.random() < 0.35) spawnBurst(Math.floor(rand(1, 4)));
        }
        // stop after 3000ms
        if (now - start < 3000 || confetti.length > 0) {
          requestAnimationFrame(loop);
        } else {
          ctx.clearRect(0, 0, W, H);
        }
      }

      // trigger on load
      window.addEventListener('load', () => {
        spawnBurst(40);
        requestAnimationFrame(loop);
      });
    })();
  </script>
</body>

</html>